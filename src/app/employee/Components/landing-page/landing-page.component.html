<div class="sidenav" [class.closed]="isSidebarClosed">
  <div class="sidenav-header">
    <h2>Employee</h2>
    <span class="menu-icon" (click)="toggleSidebar()">
      <i class="fas" [class.fa-bars]="isSidebarClosed" [class.fa-times]="!isSidebarClosed"></i>
    </span>
  </div>
  <ul class="sidebar-menu">
    <li>
      <a routerLink="/employee/main">
        <i class="fa fa-shopping-cart"></i> Sell
      </a>
    </li>

    <li class="nav-item">
      <div class="dropdown-header" (click)="toggleDropdown('submenu3')">

        <i class="fa fa-box menu-icon"></i>Product

        <i class="fa fa-caret-down dropdown-toggle-btn"></i>
      </div>
      <ul [class.show]="activeDropdown === 'submenu3'" class="submenu" id="submenu3">
        <li><a routerLink="/employee/productlist"><i class="fa fa-list menu-icon"></i> View All Products</a></li>
        <li><a routerLink="/employee/catagory"><i class="fa fa-th menu-icon"></i> Product Categories</a></li>
        <li><a routerLink="/employee/damageList"><i class="fa fa-trash menu-icon"></i> Damage Products</a></li>
        <li><a href="/employee/return"><i class="fa fa-credit-card menu-icon"></i> Return Product</a></li>
        <li><a href="/employee/barcode"><i class="fa fa-barcode"></i> Product BarCode</a></li>
        <li><a href="/employee/barcodePrint"><i class="fa fa-print"></i> Barcode Level Printers</a></li>
      </ul>
    </li>

    <li><a href="/employee/stockalert"><i class="fa fa-exclamation-triangle menu-icon"></i> Stock Alert</a></li>


    <li class="nav-item">
      <div class="dropdown-header" (click)="toggleDropdown('submenu6')">
        <i class="fa fa-user menu-icon"></i>People
        <i class="fa fa-caret-down dropdown-toggle-btn"></i>
      </div>
      <ul [class.show]="activeDropdown === 'submenu6'" class="submenu" id="submenu6">
        <li>
          <a routerLink="/employee/suppliarList">
            <i class="fa fa-users menu-icon"></i> Customer List
          </a>
        </li>
        <li>
          <a routerLink="/employee/Addsupplier">
            <i class="fa fa-truck menu-icon"></i> Supplier List
          </a>
        </li>
        <li>
          <a href="/employee/sellreport">
            <i class="fa fa-user menu-icon"></i> User List
          </a>
        </li>
        <li>
          <a routerLink="/employee/Addsupplier">
            <i class="fa fa-star menu-icon"></i> Loyality points
          </a>
        </li>
      </ul>
    </li>


    <li><a href="/employee/branch"><i class="fa fa-sitemap menu-icon"></i> Branch List</a></li>


    <li class="nav-item">
      <div class="dropdown-header" (click)="toggleDropdown('submenu5')">

        <i class="fa fa-gift menu-icon"></i>Products Offers

        <i class="fa fa-caret-down dropdown-toggle-btn"></i>
      </div>
      <ul [class.show]="activeDropdown === 'submenu5'" class="submenu" id="submenu5">
        <li><a routerLink="/employee/offer"><i class="fa fa-tags menu-icon"></i>Promotion Product</a></li>
        <li><a routerLink="/employee/bundleProduct"><i class="fa fa-boxes menu-icon"></i>Bundle Product</a></li>
      </ul>
    </li>

    <li><a href="/employee/sell"><i class="fa fa-envelope menu-icon"></i> SMS Panel</a></li>
    <li><a href="/employee"><i class="fa fa-cogs menu-icon"></i> Shop Setting & Others</a></li>
  </ul>

  <hr>


  <div class="profile">
    <img src="/assets/admin.png" alt="Admin Profile">
    <div class="info">
      <p>Employee</p>
      <a (click)="logout()">Logout</a>
    </div>
  </div>
</div>


<div class="main-content" [class.full-width]="isSidebarClosed">

  <div class="navbar">
    <div class="navbar-content">
      <span class="menu-icon" *ngIf="isSidebarClosed" (click)="toggleSidebar()">
        <i class="fas fa-bars"></i>
      </span>

      <div class="left-section">
        <div class="branch-info">{{ branchName }}</div>
        <div class="date">{{ currentDate }}</div>
      </div>
      


      <div class="center-section">
        <button class="tab walking">Walking</button>
        <button class="tab customer">Customer</button>
        <button class="tab add-customer">+ Customer</button>
      </div>


      <div class="right-section">
        <div class="header-support1">
          <div class="notification-icon" (click)="showDropdown()" aria-label="Notifications" role="button">
            <i class="fa fa-bell"></i>
            <span class="notification-badge" *ngIf="notificationsCount > 0"
              [ngClass]="{'high-count': notificationsCount > 10}">
              {{ notificationsCount }}
            </span>
          </div>
          <div class="notification-box" *ngIf="isDropdownVisible">
            <div class="notification-header">
              <h4>Notifications</h4>
              <button (click)="clearNotifications()">Clear All</button>
            </div>
            <ul>
              <li *ngFor="let notification of notifications">
                <span class="message">{{ notification.message }}</span>
                <span class="time">{{ notification.time | date:'shortTime' }}</span>
              </li>
            </ul>
          </div>

          <div class="user-dropdown">
            <i class="fa fa-user"></i> User
            <div class="dropdown-menu">
              <a href="/settings"><i class="fa fa-cog"></i> Settings</a>
              <a (click)="logout()"><i class="fa fa-sign-out-alt"></i> Logout</a>
            </div>
          </div>

        </div>
      </div>
    </div>
  </div>

  <div class="main-container">
    <div class="row">
      <!-- Left Section: Product Grid -->
      <div class="section product-panel">
        <div class="search-bar-container">
          <div class="dropdown category-dropdown">
            <select class="dropdown-select" [(ngModel)]="selectedCategory">
              <option value="">Select Category</option>
              <option *ngFor="let category of categoryList" [value]="category">{{ category.name }}</option>
            </select>
          </div>
          

          <div class="dropdown brand-dropdown">
            <select class="dropdown-select">
              <option value="">Select Brand</option>
              <option value="samsung">Samsung</option>
              <option value="nike">Nike</option>
              <option value="lg">LG</option>
            </select>
          </div>
        </div>

        <!-- Search Bar Below Dropdowns -->
        <div class="search-bar-container">
          <input type="text" [(ngModel)]="searchTest" placeholder="Search Products" class="search-bar" />
          <button class="search-button" (click)="search()">Search</button>
        </div>

        <!-- Product Grid with Select Button -->
        <div class="product-grid">
          <div *ngFor="let product of filteredProducts | paginate: { itemsPerPage: 6, currentPage: currentPage }" 
          class="product-card" (click)="addToCart(product)">
            <img [src]="product.image" alt="{{ product.name }}" class="product-image" />
            <h3 class="product-name">{{product.name}}</h3>
            <p class="product-price">Price: {{ product.sellPrice }} Taka</p>
          </div>
        </div>
        <pagination-controls (pageChange)="currentPage = $event"></pagination-controls>
        

      </div>

     <!-- Right Section: Cart Table -->
     <div class="section cart-panel">
      <div class="cart-header">Selected Products</div>
      <div class="cart-table-container">
        <table class="product-table">
          <thead>
            <tr>
              <th>Product</th>
              <th>Product Code</th>
              <th>Price</th>
              <th>Quantity</th>
              <th>Subtotal</th>
              <th>Action</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let item of cartItems">
              <td>{{ item.product.name }}</td>
              <td>{{ item.product.barcode }}</td>
              <td>{{ item.product.sellPrice }} Taka</td>
              <td><input type="number" [(ngModel)]="item.quantity" min="1" (change)="updateCartItem(item)"></td>
              <td>{{ item.quantity * item.product.sellPrice || 0 }} Taka</td>
              <td><button (click)="removeFromCart(item)">Delete</button></td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>

<div class="row">
  <div class="section billing-panel">
    <div class="cart-header1">Customer Info</div>
    <div class="customer-info">
      <span>Walking Customer | 20221605WALKING | </span>
      <input type="number" [(ngModel)]="customerPhone" placeholder="Phone Number">
    </div>

    <div class="summary-panel">
      <div>Total Items: <span>{{ cartItems.length }}</span></div>
      <div>Total Cost: <span>{{ totalCost }} Taka</span></div>
      <div>Discount: <span><input type="number" [(ngModel)]="discount" (change)="updateTotals()"> Taka</span></div>
      <div>Coupon: <span><input type="number" [(ngModel)]="coupon" (change)="updateTotals()"> Taka</span></div>
      <div>Tax: <span><input type="number" [(ngModel)]="tax" (change)="updateTotals()"> Taka</span></div>
      <div>Shipping: <span><input type="number" [(ngModel)]="shipping" (change)="updateTotals()"> Taka</span></div>
      <div>Grand Total: <span>{{ grandTotal }} Taka</span></div>
    </div>

    <div class="payment-buttons">
      <button class="btn btn-primary" (click)="navigateToConfirmSale('Cash')">Cash</button>
      <button class="btn btn-secondary" (click)="navigateToConfirmSale('Card')">Card</button>
      <button class="btn btn-warning" (click)="navigateToConfirmSale('PayPal')">PayPal</button>
      <button class="btn btn-danger" (click)="navigateToConfirmSale('Multiple Pay')">Multiple Pay</button>
    </div>
    <!-- <div class="payment-buttons">
      <button *ngFor="let method of paymentMethods" 
              class="btn" 
              [ngClass]="{'btn-primary': method === 'Cash', 'btn-secondary': method === 'Card', 'btn-warning': method === 'PayPal', 'btn-danger': method === 'Multiple Pay'}"
              (click)="navigateToConfirmSale(method)">
        {{ method }}
      </button>
    </div> -->
  </div>
</div>
</div>

  <script>
    function toggleDropdown(menuId) {
      const submenu = document.getElementById(menuId);
      submenu.classList.toggle('show');
    }
  </script>